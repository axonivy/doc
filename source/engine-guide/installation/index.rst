Installation
************

.. toctree::
   :maxdepth: 1

   standard-edition
   enterprise-edition
   upgrade
   systemdatabase


.. _install_engine:

Install |ivy-engine|
=======================

To install the |ivy-engine| extract the correct zip file for your platform to
the directory where you want to install the |ivy-engine|. For Debian based
operating systems there is a convenient installer package available. The
following platforms are supported: 

+-------+--------------+----------------------+-----------------------------------------------------------------------------------------------+
| CPU   | Architecture | Operation System     | Installation File                                                                             |
+=======+==============+======================+===============================================================================================+
| Intel | x64          | Debian (Ubuntu/Mint) | :dev-url:`axonivy-engine-V_X.Y.Z.deb  </permalink/latest/axonivy-engine.deb>`                 |
+-------+--------------+----------------------+-----------------------------------------------------------------------------------------------+
| Intel | x64          | Windows              | :dev-url:`AxonIvyEngineX.Y.Z_Windows_x64.zip </permalink/latest/axonivy-engine-windows.zip>`  |
+-------+--------------+----------------------+-----------------------------------------------------------------------------------------------+
| Intel | x64          | Linux and Windows*   | :dev-url:`AxonIvyEngineX.Y.Z_All_x64.zip </permalink/latest/axonivy-engine.zip>`              |
+-------+--------------+----------------------+-----------------------------------------------------------------------------------------------+
| Intel | x64          | Linux and Windows*   | :dev-url:`AxonIvyEngineX.Y.Z_Slim_All_x64.zip </permalink/latest/axonivy-engine-slim.zip>`    |
+-------+--------------+----------------------+-----------------------------------------------------------------------------------------------+

\* The *All* and *Slim_All* engines are delivered with launchers for Linux and
Windows, but without a JRE. To use the slim engine set up the ``IVY_JAVA_HOME``
environment variable pointing to a supported x64 JRE, or the ``JAVA_HOME``
environment variable pointing to a supported x64 JDK. The slim engine comes
without demo projects.

.. Note::
    Note, that the installation procedure implies sufficient administration and
    access rights on the system. For example the access to drive :file:`C:` on a
    Windows Server 2008 system is very restrictive that you might install the
    programs on drive :file:`D:` instead.


.. _installing-a-licence:

Installing a Licence
--------------------

By default the |ivy-engine| is running in demo mode.
You have to install a licence in order to run |ivy-engine| in a production environment.

To order a licence file you need to know the public URLs that end users will use to access your engine.

.. admonition:: Example
  
  Let's assume your Axon.ivy Engine is installed on a machine with the DNS name ``axonivyprod`` and listens on port 8080. Users access the engine in two different ways:
  
  * Intranet users use ``http://axonivyprod:8080/ivy/*`` to access it. 
  * Internet users use ``http://www.customer.com/ivy/*`` to access it through a reverse proxy.
  
  In this case the licence must contain two public URLs: ``axonivyprod`` and ``www.customer.com``.
    
  If the users do not access over the standard ``http`` or ``https`` ports (80, 443, 8080, 8443) and the 
  default context path ``/ivy`` then the public URLs must also contain the port and/or context path 
  (e.g. ``www.customer.com/axon``, ``axonivyprod:9090``, ``www.customer.com:90/axon``).    

  
To install a licence file follow the steps below:
  
#. Copy the licence file :file:`\*.lic` to the directory :file:`[engineDir]/configuration`.
#. Remove all other licence files in the :file:`[engineDir]/configuration` directory.

.. note::
  For container based installations it is also possible to make the license file
  available via :ref:`environment variables or docker-secrets <configuration_containers_licence>`.



Installed Files and Directories
-------------------------------

After the installation the following files and folders are located in the
|ivy-engine| installation folder:

+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Folder / File                    | Description                                                                                                                                                                        |
+==================================+====================================================================================================================================================================================+
| bin/                             | Programs to start and configure the engine                                                                                                                                         |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| configuration/                   | Axon.ivy Engine configuration data                                                                                                                                                 |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | reference/                     | Documentation for all available configurations                                                                                                                                     |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | templates/                     | Use case driven configuration templates                                                                                                                                            |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | :ref:`ivy-yaml`                | Main configuration file of the Axon.ivy Engine. Configures environments such as the system database, e-mail servers, administrators and more.                                      |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | :ref:`ivy-cache-properties`    | System database cache configurations                                                                                                                                               |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | keystore.p12                   | Keystore with the default signature of the Axon.ivy Engine (for https/ssl)                                                                                                         |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | truststore.p12                 | Empty truststore can be used to add trusted server certificate for SSL connection clients                                                                                          |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | :ref:`jvm-options`             | Java Virtual Machine (JVM) options of the Axon.ivy Engine.                                                                                                                         |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | :ref:`log4jconfig-xml`         | Logging configuration                                                                                                                                                              |
+-+-+------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| doc/                             | Engine-Guide, New and Noteworthy, Migration Notes and more                                                                                                                         |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| dropins/                         | Third party extension libraries that contribute to the Axon.ivy runtime                                                                                                            |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| elasticsearch/                   | Bundled Elasticsearch server                                                                                                                                                       |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| jre/                             | Java Runtime Environment for Axon.ivy Engine                                                                                                                                       |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| logs/                            | Log files                                                                                                                                                                          |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| misc/                            |                                                                                                                                                                                    |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | apache/                        | Files to integrate Axon.ivy into an Apache web server                                                                                                                              |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | iis/                           | Files to integrate Axon.ivy into a Microsoft Internet Information Server (IIS)                                                                                                     |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | visualvm/                      | The Axon.ivy VisualVM plugin file                                                                                                                                                  |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| system/                          | The OSGi system                                                                                                                                                                    |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | application/                   | System application                                                                                                                                                                 |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | configuration/                 | OSGi configuration                                                                                                                                                                 |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | demo-applications/demo-portal/ | Demo portal application which gets deployed in demo mode                                                                                                                           |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | features/                      | Installed OSGi features                                                                                                                                                            |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | lib/boot/                      | OSGi boot classpath libraries                                                                                                                                                      |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | plugins/                       | Installed OSGi plugins. Basically all default or automatically installed java libraries of the Axon.ivy Engine                                                                     |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| webapps/                         |                                                                                                                                                                                    |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | ivy/                           | Axon.ivy Engine web interface                                                                                                                                                      |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | ivy/info/                      | Info Web Pages                                                                                                                                                                     |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | ivy/WEB-INF/                   | Contains the :ref:`web-xml` file                                                                                                                                                   |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | ivy/META-INF/                  | Contains the :ref:`context-xml` file                                                                                                                                               |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| | ivy/wf/                        | Contains the workflow web interface                                                                                                                                                |
+-+--------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| work/                            | Temporary files that are created and used by the Axon.ivy Engine                                                                                                                   |
+----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+



Windows Programs
^^^^^^^^^^^^^^^^

The :file:`bin` folder of a windows installation contains the following native
dynamic link libraries and executable files:

+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| File                          | Description                                                                                                                                                                  |
+===============================+==============================================================================================================================================================================+
| AxonIvyEngine.exe             | Starts the Axon.ivy Engine. See :ref:`axonivy-engine`.                                                                                                                       |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AxonIvyEngineC.exe            | Same as AxonIvyEngine.exe but additionally logs any output to a console window.                                                                                              |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AxonIvyEngineService.exe      | Executable of the Windows service. See :ref:`engine-service`.                                                                                                                |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ControlCenter.exe             | Program that allows to configure, start and stop the Axon.ivy Engine. It also permits to configure the Windows services. See :ref:`control-center`.                          |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ControlCenterC.exe            | Same as ControlCenter.exe but additionally logs any output to a console window.                                                                                              |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| JavaWindowsServiceHandler.dll | Library that contains native methods to register, unregister, configure, start and stop windows services                                                                     |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| JVMLauncher.dll               | Library containing code to launch the Java virtual machine.                                                                                                                  |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


Linux Programs
^^^^^^^^^^^^^^

The :file:`bin` folder of a Linux installation contains the following script
files:

+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
| File                  | Description                                                                                                               |
+=======================+===========================================================================================================================+
| AxonIvyEngine         | Starts the Axon.ivy Engine. See :ref:`axonivy-engine`.                                                                    |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
| AxonIvyEngine.service | Template systemd script of the Linux service. It will be copied to /etc/systemd/system/ by running InstallService.sh.     |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
| ControlCenter         | Program that allows to configure, start and stop the Axon.ivy Engine. See :ref:`control-center`.                          |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
| InstallService.sh     | Script to install the Axon.ivy Engine as a daemon. See :ref:`engine-service`.                                             |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
| launcher.sh           | Helper script to launch a Java program.                                                                                   |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------+
